-- Database: PAPELERIA

-- DROP DATABASE "PAPELERIA";

CREATE DATABASE "PAPELERIA"
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'Spanish_Mexico.1252'
    LC_CTYPE = 'Spanish_Mexico.1252'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1;
	
	CREATE TABLE CLIENTE ( 
    id_Cliente serial NOT NULL,
    nombre varchar(40) NOT NULL,
    ap_Pat varchar(20) NOT NULL,
    ap_Mat varchar(20),
    razon_Social text,
    email varchar(80) NOT NULL,
    PRIMARY KEY(id_Cliente)
    );
	
SELECT *FROM CLIENTE;
	
INSERT INTO CLIENTE VALUES(1,'JUAN','PEREZ','MARTINEZ','PEMJ980126','JPMARTINEZ@YAHOO.COM');
INSERT INTO CLIENTE VALUES(2,'KARLA','SANCHEZ','HERNANDEZ','SAHK500130','VIRGENSITA-POP@HOTMAIL.COM');
INSERT INTO CLIENTE VALUES(3,'EMILIANO','CORTES','\N','CORE931220','NACHOLIBREX3_@GMAIL.COM');
INSERT INTO CLIENTE VALUES(4,'JUAN','PEREZ','MARTINEZ','PEMJ810803','JPMARTINEZ@YAHOO.COM');

 CREATE TABLE INVENTARIO (
    id_Inventario serial NOT NULL,
    nombre varchar(40) NOT NULL,
    --id_Domicilio_Inventario serial NOT NULL,
    PRIMARY KEY(id_Inventario)
    --FOREIGN KEY(id_Domicilio_Inventario) REFERENCES DOMICILIO_INVENTARIO(id_Domicilio_Inventario)
    );
	SELECT *FROM INVENTARIO;
	
INSERT INTO INVENTARIO VALUES(1,'HOJAS BLANCAS');
INSERT INTO INVENTARIO VALUES(2,'TIJERAS');
INSERT INTO INVENTARIO VALUES(3,'PELUCHE');
INSERT INTO INVENTARIO VALUES(4,'ALAJERO');
INSERT INTO INVENTARIO VALUES(5,'CARTERA');

    
CREATE TABLE PRODUCTO (
    precio_Venta money NOT NULL,
    tipo_Articulo varchar(5) NOT NULL,
    codigo_Barras varchar(20) NOT NULL,
	nombre varchar(40) NOT NULL,
    PRIMARY KEY (codigo_Barras)
    );
	
SELECT *FROM PRODUCTO;

INSERT INTO PRODUCTO VALUES(20,'PAPEL','0011HOJASB100CARTA','HOJAS BLANCAS');
INSERT INTO PRODUCTO VALUES(12,'PAPEL','0012TIJERAS020','TIJERAS');
INSERT INTO PRODUCTO VALUES(100,'REGAL','00605PELUCHE5','PELUCHE');
INSERT INTO PRODUCTO VALUES(180,'REGAL','00547ALAJEROMUSIC','ALAJERO');
INSERT INTO PRODUCTO VALUES(50,'REGAL','0064CARTERA6DAMA3000','CARTERA');
INSERT INTO PRODUCTO VALUES(50,'RECAR','05506RECARGAT50','RECARGA 50 TELCEL');
INSERT INTO PRODUCTO VALUES(100,'RECAR','0506RECARGATELCEL100','RECARGA 100 TELCEL');
INSERT INTO PRODUCTO VALUES(50,'RECAR','0550RECARGAMOV50','RECARGA 50 MOVISTAR');
INSERT INTO PRODUCTO VALUES(100,'RECAR','05506RECARGAMOV10024','RECARGA 100 MOVISTAR');
INSERT INTO PRODUCTO VALUES(5,'PAPEL','498IMPRESIONCOLOR584','IMPRESION A COLOR');


CREATE TABLE DOMICILIO ( 
    id_Domicilio serial NOT NULL,
    estado varchar(40) NOT NULL,
    colonia varchar(40) NOT NULL,
    calle varchar(40) NOT NULL,
    numero smallint NOT NULL,
    cp integer NOT NULL,
    PRIMARY KEY(id_Domicilio)
    );

SELECT *FROM DOMICILIO;

INSERT INTO DOMICILIO VALUES(1,'CHIHUAHUA','PEDREGAL',11,5,98755);
INSERT INTO DOMICILIO VALUES(2,'CDMX','LOMAS','ENCINO',9,55746);
INSERT INTO DOMICILIO VALUES(3,'VERACRUZ','CASITAS','TLATELOLCO',52,63214);
INSERT INTO DOMICILIO VALUES(4,'SONORA','CHAPULTEPEC','RIO',364,98745);
INSERT INTO DOMICILIO VALUES(5,'CDMX','POLANCO','AV.EJERCITO NACIONAL',884,11540);
INSERT INTO DOMICILIO VALUES(6,'CDMX','INDUSTRIAL VALLEJO','NORTE 59',846,02300);
INSERT INTO DOMICILIO VALUES(7,'CDMX','ESPAÑA','POLIGONO DE POCOMACO',14,15190);
INSERT INTO DOMICILIO VALUES(8,'CDMX','DOCTORES','CLAUDIO BERNARD',50,06720);


CREATE TABLE PROVEEDOR ( 
    id_Proveedor serial NOT NULL,
    nombre varchar(40) NOT NULL,
    ap_Pat varchar(20) NOT NULL,
    ap_Mat varchar(20),
    razon_Social text,
    PRIMARY KEY (id_Proveedor)
    );
    
SELECT *FROM PROVEEDOR;
INSERT INTO PROVEEDOR VALUES(1,'JUAN','RENE','LINARES','Industrias Danpex S.A de C.V.');
INSERT INTO PROVEEDOR VALUES(2,'KARLA','FERNANDEZ','RUIZ','OFICIMUNDO S.A. de C.V.');
INSERT INTO PROVEEDOR VALUES(3,'REY','CORTINES','FRAGOSO','SANTIAGO Y CÍA ALMACENES COMERCIALES S.L.');


CREATE TABLE TELEFONO ( 
    id_Telefono serial NOT NULL,
    num_Telefono varchar(10) NOT NULL,
    PRIMARY KEY (id_Telefono)
    );
	
	SELECT *FROM TELEFONO;
INSERT INTO TELEFONO VALUES(1,5562782479);
INSERT INTO TELEFONO VALUES(2,5553686296);
INSERT INTO TELEFONO VALUES(3,5569687954);

CREATE SEQUENCE num_Venta
    START WITH 1
    INCREMENT BY 1;

CREATE TABLE VENTA ( 
    id_Venta TEXT NOT NULL DEFAULT 'VENT-'||nextval('num_Venta'::regclass)::TEXT,
    cant_Art_Total smallint NOT NULL,
    precio_Total money NOT NULL,
    fecha_Venta date NOT NULL,
    PRIMARY KEY (id_Venta)
    );
	
	SELECT *FROM VENTA;
	
INSERT INTO VENTA VALUES(NEXTVAL('num_Venta'),2,32,'2020-12-15');
INSERT INTO VENTA VALUES(NEXTVAL('num_Venta'),1,100,'2020-12-20');
INSERT INTO VENTA VALUES(NEXTVAL('num_Venta'),2,62,'2021-01-17');
INSERT INTO VENTA VALUES(NEXTVAL('num_Venta'),3,330,'2020-11-06');
						 
CREATE TABLE COMPRA( 
    id_Compra serial NOT NULL,
    id_Venta TEXT NOT NULL ,
    id_Cliente serial NOT NULL,
    codigo_Barras varchar(20) NOT NULL,
    PRIMARY KEY (id_Compra),
    FOREIGN KEY(id_Venta) REFERENCES VENTA(id_Venta),
    FOREIGN KEY(id_Cliente) REFERENCES CLIENTE(id_Cliente),
    FOREIGN KEY(codigo_Barras) REFERENCES PRODUCTO(codigo_Barras)
    );
	
INSERT INTO COMPRA VALUES()
INSERT INTO COMPRA VALUES()
INSERT INTO COMPRA VALUES()
INSERT INTO COMPRA VALUES()
    
CREATE TABLE DOMICILIO_CLIENTE ( 
    id_Domicilio_Cliente serial NOT NULL,
    id_Cliente serial NOT NULL,
    id_Domicilio serial NOT NULL,
    PRIMARY KEY (id_Domicilio_Cliente),
    FOREIGN KEY(id_Cliente) REFERENCES CLIENTE(id_Cliente),
    FOREIGN KEY(id_Domicilio) REFERENCES DOMICILIO(id_Domicilio)
    );
	
	SELECT *FROM DOMICILIO_CLIENTE;
INSERT INTO DOMICILIO_CLIENTE VALUES(1,1,1);
INSERT INTO DOMICILIO_CLIENTE VALUES(2,2,2);
INSERT INTO DOMICILIO_CLIENTE VALUES(3,3,3);
INSERT INTO DOMICILIO_CLIENTE VALUES(4,4,4);
							  
CREATE TABLE DOMICILIO_PROVEEDOR( 
    id_Domicilio_Proveedor serial NOT NULL,
    id_Proveedor serial NOT NULL,
    id_Domicilio serial NOT NULL,
    PRIMARY KEY (id_Domicilio_Proveedor),
    FOREIGN KEY(id_Proveedor) REFERENCES PROVEEDOR(id_Proveedor),
    FOREIGN KEY(id_Domicilio) REFERENCES DOMICILIO(id_Domicilio)
    );
    
	SELECT *FROM PROVEEDOR;
INSERT INTO DOMICILIO_PROVEEDOR VALUES(1,1,5);
INSERT INTO DOMICILIO_PROVEEDOR VALUES(2,2,6);
INSERT INTO DOMICILIO_PROVEEDOR VALUES(3,3,7);
									  
	
CREATE TABLE DOMICILIO_INVENTARIO ( 
    id_Domicilio_Inventario serial NOT NULL,
    id_Inventario serial NOT NULL,
    id_Domicilio serial NOT NULL,
    PRIMARY KEY (id_Domicilio_Inventario),
    FOREIGN KEY (id_Inventario) REFERENCES INVENTARIO(id_Inventario),
    FOREIGN KEY (id_Domicilio) REFERENCES DOMICILIO(id_Domicilio)
    );
	
INSERT INTO DOMICILIO_INVENTARIO VALUES(1,1,8);
INSERT INTO DOMICILIO_INVENTARIO VALUES(2,2,8);
INSERT INTO DOMICILIO_INVENTARIO VALUES(3,3,8);
INSERT INTO DOMICILIO_INVENTARIO VALUES(4,4,8);
INSERT INTO DOMICILIO_INVENTARIO VALUES(5,5,8);



CREATE TABLE TELEFONO_PROVEEDOR (  
    id_Telefono_Proveedor serial NOT NULL,
    id_Telefono serial NOT NULL,
    id_Proveedor serial NOT NULL,
    PRIMARY KEY (id_Telefono_Proveedor),
    FOREIGN KEY (id_Telefono) REFERENCES TELEFONO(id_Telefono),
    FOREIGN KEY(id_Proveedor) REFERENCES PROVEEDOR(id_Proveedor)
    );
	
	SELECT *FROM TELEFONO_PROVEEDOR;
INSERT INTO TELEFONO_PROVEEDOR VALUES(1,1,1);
INSERT INTO TELEFONO_PROVEEDOR VALUES(2,2,2);
INSERT INTO TELEFONO_PROVEEDOR VALUES(3,3,3);
        
CREATE TABLE INVENTARIO_PRODUCTO ( 
    id_Inventario_Producto serial NOT NULL ,
    id_Inventario int NOT NULL,
    codigo_Barras varchar(20) NOT NULL,
    descripcion text NOT NULL,
    cantidad smallint NOT NULL,
    marca varchar(25) NOT NULL,
    PRIMARY KEY (id_Inventario_Producto),
    FOREIGN KEY (id_Inventario) REFERENCES INVENTARIO(id_Inventario),
    FOREIGN KEY(codigo_Barras) REFERENCES PRODUCTO(codigo_Barras)
    );
	
INSERT INTO INVENTARIO_PRODUCTO VALUES(1,1,'0011HOJASB100CARTA','PAQUETE DE 100 HOJAS BLANCAS',10,'XEROX');
INSERT INTO INVENTARIO_PRODUCTO VALUES(2,2,'0012TIJERAS020','TIJERAS DE USO ESCOLAR',20,'MAPED');
INSERT INTO INVENTARIO_PRODUCTO VALUES(3,3,'00605PELUCHE5','OSO DE PELUCHE MEDIANO',15,'KAWAI');
INSERT INTO INVENTARIO_PRODUCTO VALUES(4,4,'00547ALAJEROMUSIC','ALAJERO MUSICAL DE BAILARINA',50,'BRYNNL');
INSERT INTO INVENTARIO_PRODUCTO VALUES(5,5,'0064CARTERA6DAMA3000','CARTA-MONEDERO DE DAMA NEGRO',12,'GAP');
									   
    
	
CREATE TABLE PROVEE ( 
    id_Provee serial NOT NULL,
    id_Proveedor serial NOT NULL,
    codigo_Barras varchar(20) NOT NULL,
    cant_Compra smallint,
    precio_Compra smallint,
    fecha_Compra date,
    PRIMARY KEY (id_Provee),
    FOREIGN KEY (id_Proveedor) REFERENCES PROVEEDOR(id_Proveedor),
    FOREIGN KEY(codigo_Barras) REFERENCES PRODUCTO(codigo_Barras)
);

INSERT INTO PROVEE VALUES(1,2,'0011HOJASB100CARTA',10,12,'2020-10-25');
INSERT INTO PROVEE VALUES(2,1,'0012TIJERAS020',20,8.50,'2020-12-02');
INSERT INTO PROVEE VALUES(3,3,'00605PELUCHE5',15,50,'2021-01-20');
INSERT INTO PROVEE VALUES(4,3,'00547ALAJEROMUSIC',50,100,'2021-01-25');
INSERT INTO PROVEE VALUES(5,3,'0064CARTERA6DAMA3000',12,20,'2020-11-25');
						  